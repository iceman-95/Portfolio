<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction History</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-left">
            <img src="pngegg.png" alt="Global Trust Bank Logo" class="logo">
            <h1>Global Trust Bank</h1>
        </div>
        <div class="navbar-center">
            <a href="dashboard.html" class="nav-link">
                <i class="fas fa-chart-line"></i>
                <span>Dashboard</span>
            </a>
            <a href="transactions.html" class="nav-link active">
                <i class="fas fa-exchange-alt"></i>
                <span>Transactions</span>
            </a>
        </div>
        <div class="navbar-right">
            <div class="theme-toggle">
                <input type="checkbox" id="theme-toggle" class="theme-toggle-input">
                <label for="theme-toggle" class="theme-toggle-label">
                    <i class="fas fa-sun"></i>
                    <i class="fas fa-moon"></i>
                </label>
            </div>
            <div class="notification-bell">
                <i class="fas fa-bell"></i>
                <span class="notification-dot"></span>
            </div>
            <div class="user-profile">
                <img src="acc_p.png" alt="Profile Picture" class="profile-pic">
                <span class="user-name">Giorgi Imerlishvili</span>
                <i class="fas fa-chevron-down"></i>
                <div id="profileDropdown" class="dropdown">
                    <div class="dropdown-content">
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-user"></i>
                            <span>Profile Settings</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-cog"></i>
                            <span>Account Settings</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-shield-alt"></i>
                            <span>Security</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Logout</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <main class="transactions-main">
        <div class="section-header">
            <h2>Transaction History</h2>
            <div class="header-actions">
                <button class="filter-btn">
                    <i class="fas fa-filter"></i>
                    <span>Filter</span>
                </button>
                <button class="export-btn">
                    <i class="fas fa-download"></i>
                    <span>Export</span>
                </button>
            </div>
        </div>
        <div class="transactions-list">
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-shopping-cart"></i></div>
                <div class="transaction-info"><div class="transaction-name">Supermarket</div><div class="transaction-date">2025-07-15</div></div>
                <div class="transaction-category">Groceries</div>
                <div class="transaction-amount negative">- ₾97.64</div>
            </div>
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-coffee"></i></div>
                <div class="transaction-info"><div class="transaction-name">Coffee House</div><div class="transaction-date">2025-07-14</div></div>
                <div class="transaction-category">Restaurant</div>
                <div class="transaction-amount negative">- ₾80.35</div>
            </div>
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-shopping-cart"></i></div>
                <div class="transaction-info"><div class="transaction-name">Mini Market</div><div class="transaction-date">2025-07-13</div></div>
                <div class="transaction-category">Groceries</div>
                <div class="transaction-amount negative">- ₾51.53</div>
            </div>
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-bolt"></i></div>
                <div class="transaction-info"><div class="transaction-name">Electricity Bill</div><div class="transaction-date">2025-07-12</div></div>
                <div class="transaction-category">Utilities</div>
                <div class="transaction-amount negative">- ₾149.81</div>
            </div>
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-bread-slice"></i></div>
                <div class="transaction-info"><div class="transaction-name">Bakery</div><div class="transaction-date">2025-07-11</div></div>
                <div class="transaction-category">Restaurant</div>
                <div class="transaction-amount negative">- ₾25.99</div>
                </div>
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-shopping-cart"></i></div>
                <div class="transaction-info"><div class="transaction-name">Grocery Express</div><div class="transaction-date">2025-07-10</div></div>
                <div class="transaction-category">Groceries</div>
                <div class="transaction-amount negative">- ₾42.95</div>
            </div>
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-utensils"></i></div>
                <div class="transaction-info"><div class="transaction-name">Restaurant</div><div class="transaction-date">2025-07-09</div></div>
                <div class="transaction-category">Restaurant</div>
                <div class="transaction-amount negative">- ₾103.57</div>
                </div>
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-bus"></i></div>
                <div class="transaction-info"><div class="transaction-name">Bus Pass</div><div class="transaction-date">2025-07-08</div></div>
                <div class="transaction-category">Transport</div>
                <div class="transaction-amount negative">- ₾50.00</div>
            </div>
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-gift"></i></div>
                <div class="transaction-info"><div class="transaction-name">Gift Shop</div><div class="transaction-date">2025-07-07</div></div>
                <div class="transaction-category">Shopping</div>
                <div class="transaction-amount negative">- ₾243.33</div>
                </div>
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-utensils"></i></div>
                <div class="transaction-info"><div class="transaction-name">Diner</div><div class="transaction-date">2025-07-06</div></div>
                <div class="transaction-category">Restaurant</div>
                <div class="transaction-amount negative">- ₾50.69</div>
            </div>
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-tshirt"></i></div>
                <div class="transaction-info"><div class="transaction-name">Clothing Store</div><div class="transaction-date">2025-07-05</div></div>
                <div class="transaction-category">Shopping</div>
                <div class="transaction-amount negative">- ₾191.95</div>
            </div>
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-car"></i></div>
                <div class="transaction-info"><div class="transaction-name">Taxi</div><div class="transaction-date">2025-07-04</div></div>
                <div class="transaction-category">Transport</div>
                <div class="transaction-amount negative">- ₾15.50</div>
            </div>
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-bolt"></i></div>
                <div class="transaction-info"><div class="transaction-name">Water Bill</div><div class="transaction-date">2025-07-03</div></div>
                <div class="transaction-category">Utilities</div>
                <div class="transaction-amount negative">- ₾40.00</div>
            </div>
            <!-- Income: ₾2,450.00 -->
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-money-bill-wave"></i></div>
                <div class="transaction-info"><div class="transaction-name">Salary</div><div class="transaction-date">2025-07-02</div></div>
                <div class="transaction-category">Income</div>
                <div class="transaction-amount positive">+ ₾2,000.00</div>
            </div>
            <div class="transaction-row">
                <div class="transaction-icon"><i class="fas fa-briefcase"></i></div>
                <div class="transaction-info"><div class="transaction-name">Freelance Payment</div><div class="transaction-date">2025-07-01</div></div>
                <div class="transaction-category">Income</div>
                <div class="transaction-amount positive">+ ₾450.00</div>
            </div>
        </div>
        <section class="transaction-summary">
            <div class="summary-grid">
                <div class="summary-card">
                    <i class="fas fa-arrow-up"></i>
                    <div class="summary-content">
                        <h3>Total Income</h3>
                        <p class="summary-amount positive">+ ₾2,450.00</p>
                    </div>
                </div>
                <div class="summary-card">
                    <i class="fas fa-arrow-down"></i>
                    <div class="summary-content">
                        <h3>Total Expenses</h3>
                        <p class="summary-amount negative" id="totalExpenses">- ₾1,212.30</p>
                    </div>
                </div>
                <div class="summary-card">
                    <i class="fas fa-chart-line"></i>
                    <div class="summary-content">
                        <h3>Net Balance</h3>
                        <p class="summary-amount">₾202.31</p>
                    </div>
                </div>
            </div>
        </section>
        <section class="spending-chart-section">
            <div class="section-header">
                <h2>Spending by Category</h2>
                <i class="fas fa-chart-bar"></i>
            </div>
            <div class="chart-container" id="chartContainer"></div>
        </section>
    </main>
    <div id="notificationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Notifications</h3>
                <button class="close-btn" onclick="closeNotificationModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="notification-item">
                    <i class="fas fa-info-circle"></i>
                    <div class="notification-text">
                        <p>Your salary has been deposited to your account.</p>
                        <span class="notification-time">2 hours ago</span>
                    </div>
                </div>
                <div class="notification-item">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div class="notification-text">
                        <p>New security update available for your account.</p>
                        <span class="notification-time">1 day ago</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Filter Modal -->
    <div id="filterModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Filter Transactions</h3>
                <button class="close-btn" onclick="closeFilterModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="filter-group">
                    <label for="dateRange">Date Range:</label>
                    <select id="dateRange">
                        <option value="">All Time</option>
                        <option value="today">Today</option>
                        <option value="week">This Week</option>
                        <option value="month">This Month</option>
                        <option value="quarter">This Quarter</option>
                        <option value="year">This Year</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="category">Category:</label>
                    <select id="category">
                        <option value="">All Categories</option>
                        <option value="Groceries">Groceries</option>
                        <option value="Restaurant">Restaurant</option>
                        <option value="Utilities">Utilities</option>
                        <option value="Transport">Transport</option>
                        <option value="Shopping">Shopping</option>
                        <option value="Income">Income</option>
                    </select>
                </div>
                <div class="amount-inputs">
                    <div class="filter-group">
                        <label for="minAmount">Min Amount (₾):</label>
                        <input type="number" id="minAmount" placeholder="0">
                    </div>
                    <div class="filter-group">
                        <label for="maxAmount">Max Amount (₾):</label>
                        <input type="number" id="maxAmount" placeholder="∞">
                    </div>
                </div>
                <div class="filter-actions">
                    <button class="btn-secondary" onclick="closeFilterModal()">Cancel</button>
                    <button class="btn-primary" onclick="applyFilter()">Apply Filter</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Notification functionality
        const notificationBell = document.querySelector('.notification-bell');
        const notificationModal = document.getElementById('notificationModal');
        const notificationDot = document.querySelector('.notification-dot');

        notificationBell.addEventListener('click', () => {
            notificationModal.style.display = 'flex';
            notificationDot.style.display = 'none';
        });

        function closeNotificationModal() {
            notificationModal.style.display = 'none';
        }

        // Close modal when clicking outside
        window.addEventListener('click', (event) => {
            if (event.target === notificationModal) {
                closeNotificationModal();
            }
        });

        // Profile dropdown functionality
        const userProfile = document.querySelector('.user-profile');
        const profileDropdown = document.getElementById('profileDropdown');
        let dropdownOpen = false;

        userProfile.addEventListener('click', () => {
            dropdownOpen = !dropdownOpen;
            profileDropdown.style.display = dropdownOpen ? 'block' : 'none';
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (event) => {
            if (!userProfile.contains(event.target) && !profileDropdown.contains(event.target)) {
                dropdownOpen = false;
                profileDropdown.style.display = 'none';
            }
        });

        // Filter functionality
        const filterBtn = document.querySelector('.filter-btn');
        const filterModal = document.getElementById('filterModal');

        filterBtn.addEventListener('click', () => {
            filterModal.style.display = 'flex';
        });

        function closeFilterModal() {
            filterModal.style.display = 'none';
        }

        // Close filter modal when clicking outside
        window.addEventListener('click', (event) => {
            if (event.target === filterModal) {
                closeFilterModal();
            }
        });

        function applyFilter() {
            const dateRange = document.getElementById('dateRange').value;
            const category = document.getElementById('category').value;
            const minAmount = document.getElementById('minAmount').value;
            const maxAmount = document.getElementById('maxAmount').value;
            
            alert(`Filter applied:\nDate Range: ${dateRange}\nCategory: ${category}\nAmount: ${minAmount ? minAmount : '0'} - ${maxAmount ? maxAmount : '∞'}`);
            closeFilterModal();
        }

        // Export functionality
        const exportBtn = document.querySelector('.export-btn');
        exportBtn.addEventListener('click', () => {
            alert('Exporting transaction data to CSV...');
        });

        // Transaction row click functionality
        const transactionRows = document.querySelectorAll('.transaction-row');
        transactionRows.forEach(row => {
            row.addEventListener('click', () => {
                const transactionName = row.querySelector('.transaction-name').textContent;
                const amount = row.querySelector('.transaction-amount').textContent;
                alert(`Transaction Details:\n${transactionName}\nAmount: ${amount}`);
            });
        });

        // Theme toggle functionality
        const themeToggle = document.getElementById('theme-toggle');
        themeToggle.addEventListener('change', () => {
            document.body.classList.toggle('dark-theme');
        });

        // Spending by Category chart logic
        const transactions = Array.from(document.querySelectorAll('.transaction-row')).map(row => {
            const name = row.querySelector('.transaction-name').textContent;
            let category = row.querySelector('.transaction-category').textContent;
            if (category === 'Cafes' || category === 'Dining') category = 'Restaurant';
            const amountText = row.querySelector('.transaction-amount').textContent.replace(/[^\d\-\.]/g, '');
            const amount = parseFloat(amountText);
            return { name, category, amount };
        }).filter(t => t.category !== 'Insurance');
        const categories = {};
        let totalExpenses = 0;
        transactions.forEach(t => {
            if (t.amount < 0) {
                categories[t.category] = (categories[t.category] || 0) + Math.abs(t.amount);
                totalExpenses += Math.abs(t.amount);
            }
        });
        const categoryIcons = {
            'Groceries': '🛒',
            'Restaurant': '🍽️',
            'Utilities': '⚡',
            'Transport': '🚗',
            'Income': '💸',
            'Shopping': '🛍️'
        };
        const colors = {
            'Groceries': 'linear-gradient(90deg, #ff6b6b, #ff8e8e)',
            'Restaurant': 'linear-gradient(90deg, #ffd200, #f7971e)',
            'Utilities': 'linear-gradient(90deg, #44a08d, #4ecdc4)',
            'Transport': 'linear-gradient(90deg, #96c93d, #45b7d1)',
            'Shopping': 'linear-gradient(90deg, #a18cd1, #fbc2eb)'
        };
        const maxCategory = Math.max(...Object.values(categories));
        const chartContainer = document.getElementById('chartContainer');
        if (chartContainer) {
            chartContainer.innerHTML = '';
            Object.entries(categories).forEach(([cat, val]) => {
                const width = maxCategory ? Math.round((val / maxCategory) * 60 + 20) : 0; // 20-80%
                chartContainer.innerHTML += `
                    <div class="chart-item" style="display: flex; align-items: center; margin-bottom: 12px;">
                        <div class="chart-label" style="display: flex; align-items: center; min-width: 160px;">
                            <span style="font-size: 1.6em; margin-right: 8px;">${categoryIcons[cat] || '❓'}</span>
                            <span style="font-size: 1.1em;">${cat}</span>
                        </div>
                        <div class="chart-bar-container" style="flex: 1; margin: 0 16px; background: #e6e9f0; border-radius: 8px; height: 16px; display: flex; align-items: center;">
                            <div class="chart-bar" style="height: 16px; border-radius: 8px; background: ${colors[cat] || '#ccc'}; width: ${width}%;"></div>
                        </div>
                        <span class="chart-value" style="font-size: 1.1em; color: #1a237e; min-width: 80px; text-align: right;">₾${val.toFixed(2)}</span>
                    </div>
                `;
            });
        }
        // Update Total Expenses summary dynamically
        const totalExpensesElem = document.getElementById('totalExpenses');
        if (totalExpensesElem) {
            totalExpensesElem.textContent = `- ₾${totalExpenses.toFixed(2)}`;
        }
    </script>
</body>
</html> 